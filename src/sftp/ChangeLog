2002-02-25  Pontus  <pont@it.uu.se>

	* sftp_bind.c (lsftp_lsftp_cb_init): Fixed a bug using the same
	memory both for sftp_cbs and lsftp_cbs, mumble!

2002-02-24  Pontus  <pont@it.uu.se>

	* sftp_bind.c (lsftp_remove_lsftp_cb): Use lsftp_nullcb to clean
	out callback.
	(lsftp_handle_packet): Changed variable i (used twice) to r.

	* sftp_bind.h: New function lsftp_nullcb.

	* sftp_bind.c (lsftp_compact_sftp_cbs): Fixed a bug that would
	loose callbacks before a hole if there were any more.
	(lsftp_compact_lsftp_cbs): Fixed the same bug for struct
	lsftp_callbacks.
	(lsftp_handle_packet): Clean out old state after callbacks, should
	hopefully make things more robust.

	(lsftp_nullcb): New function to clean a struct lsftp_callback.

	* dc.c (lsftp_dc_init): Check that malloc succeeded before using
	the memory (duh!).
	
	* sftp_bind.c: Removed obsolete default callback array sizes.

	* dc.c: Removed obsolete default dircache size.

	* lsftp.c (main): Always init the callbacks.

	* sftp_bind.c (lsftp_lsftp_cb_init): Also clear option flags.

	* lsftp.c (main): Added some comments.

	* sftp_bind.c (lsftp_do_put): Added some comments.

2002-02-22  Pontus  <pont@it.uu.se>

	* configure.ac (lsh_cv_c_attribute): Removed obsolete checks for
	behaviour of stat and lstat.

2002-02-12  Pontus  <pont@it.uu.se>

	* commands.c (com_mv): Didn't properly check for error in return value of
	lsftp_dc_r_isdir.

2002-02-11  Pontus  <pont@it.uu.se>

	* sftp-server.c (sftp_process_realpath): Added deugging message.
	(sftp_process): Added debugging message.
	(sftp_process_symlink): Added debugging message.

	* buffer.c (sftp_read_packet): If called with data left, flush
	(read and throw away) remaining data.

	* configure.ac: Created new configure.ac as a merge of the
	configure.in from lsftp and the sftp package.

	* Started new Changelog in sftp. 

